<tool id="fastk" name="FastK" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="20.01">
    <description>A k-mer counter for high-quality assembly datasets.</description>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">fastk</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        #if $operation_type.command_type == 'FastK'
        FastK 
        #set kmer_size=$operation_type.kmer_size
        -k$kmer_size 
            #if $operation_type.sorted_table.sorted_table_presence == 'yes'
                #if $operation_type.sorted_table.type_sorted_table == 'default'
                -t 
                #elif $operation_type.sorted_table.type_sorted_table == 'cutoff'
                #set sorted_table_cutoff=$oeration_type.sorted_table.type_sorted_table.sorted_table_cutoff
                -t$sorted_table_cutoff 
            #elif $operation_type.sorted_table.sorted_table_presence == 'no'
        -T\${GALAXY_SLOTS:-1}

        #elif $operation_type.command_type == 'Histex'
        #elif $operation_type.command_type == 'Tabex'
        #elif $operation_type.command_type == 'Profex'
        #elif $operation_type.command_type == 'Logex'
        #elif $operation_type.command_type == 'Symmex'
    ]]></command>
    <inputs>
        <conditional name="operation_type">
            <param name="command_type" type="select" label="Operation type selector" help="Select a type of operation">
                <option value="FastK">FastK (count k-mers)</option>
                <option value="Histex">Histex (display a FastK histogram)</option>
                <option value="Tabex">Tabex (list, check, or find a k-mer in a FastK table)</option>
                <option value="Profex">Profex (display a FastK profile)</option>
                <option value="Logex">Logex (combine k-mer,count tables with logical expressions & filter with count cutoffs)</option>
                <option value="Symmex">Symmex (produce a symmetric k-mer table from a canonical one)</option>
            </param>
            <when value="FastK">
                <param name="infile" type="data" format="fasta,fasta.gz,fastq,fastq.gz,cram,bam,sam" label="Input file" />
                <param name="kmer_size" type="integer" min="5" max="50" value ="" label="K-mer size" help="Default k-mer size is 40." />
                <conditional name="sorted_table">
                    <param name="sorted_table_presence" type="select" label="Sorted table selection" help="Do you want a sorted table of all canonical k-mers and their counts?">
                        <option value="no">no thank you</option>
                        <option value="yes">yes</option>
                    </param>
                    <when value="no">
                    </when>
                    <when value="yes">
                        <conditional name="type_sorted_table">
                            <param name="sorted_table_options" type="select" label="Sorted table presence" help="Do you want to specify a cut-off?">
                                <option value="default_sorted_table">default (1)</option>
                                <option value="cutoff_sorted_table">specify cutoff</option>
                            </param>
                            <when value="default_sorted_table">
                                <param name="sorted_table_default" argument="-t" />
                            </when>
                            <when value="cutoff_sorted_table" argument="-t" type="text" label="Sorted table cutoff">
                                <param name="sorted_table_cutoff" type="integer" min="2" value="" label="Sorted table cutoff value"/>
                            </when>
                        </conditional>
                    </when>
                </conditional>
            </when>
            <when value="Histex">
            </when>
            <when value="Tabex">
            </when>
            <when value="Profex">
            </when>
            <when value="Logex">
            </when>
            <when value="Symmex">
            </when>
        </conditional>
    </inputs>
    <outputs>

    </outputs>
    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>

